# CI/CD Setup Guide

## Cypress Cloud Integration

This project is integrated with Cypress Cloud for test recording, parallelization, and detailed test analytics.

### Project Details
- **Project ID**: `azqdup`
- **Dashboard**: [https://cloud.cypress.io/projects/azqdup](https://cloud.cypress.io/projects/azqdup)

## GitHub Actions Workflow

### Automatic Test Execution
Tests run automatically on:
- ✅ Push to `main` or `develop` branches
- ✅ Pull requests to `main` or `develop` branches

### Features
- **Parallel Execution**: Tests run on 2 parallel containers for faster results
- **Cloud Recording**: All test runs are recorded to Cypress Cloud
- **Artifacts**: Screenshots (on failure) and videos are uploaded as GitHub artifacts
- **Browser**: Tests run on Chrome in CI environment

### Workflow Configuration
Location: `.github/workflows/cypress.yml`

The workflow:
1. Checks out the code
2. Sets up Node.js 18
3. Installs dependencies
4. Starts Vite dev server
5. Runs Cypress tests in parallel
6. Records results to Cypress Cloud
7. Uploads artifacts (screenshots/videos)

## Setup Instructions

### 1. GitHub Secrets
Required secrets in GitHub repo → Settings → Secrets → Actions:

| Secret Name | Description | Status |
|------------|-------------|--------|
| `CYPRESS_RECORD_KEY` | Cypress Cloud record key | ✅ Configured |
| `GITHUB_TOKEN` | Auto-generated by GitHub | ✅ Auto-available |

### 2. Local Recording
To record tests locally to Cypress Cloud:

```bash
npx cypress run --record --key YOUR_CYPRESS_RECORD_KEY
```

### 3. View Results
After tests run:
1. Go to [Cypress Cloud Dashboard](https://cloud.cypress.io/projects/azqdup)
2. View detailed test results, screenshots, and videos
3. Analyze flaky tests and performance metrics

## Test Statistics

### Current Test Suite
- **Total Tests**: 124
- **Passing**: 122 ✅
- **Skipped**: 2 ⏭️
- **Pass Rate**: 98.4%

### Test Categories
1. **Smoke Tests** (12 tests) - Core functionality
2. **Navigation Tests** (13 tests) - Menu and routing
3. **Theme Toggle Tests** (10 tests) - Dark/Light mode
4. **Links Tests** (15 tests) - External links validation
5. **Responsive Tests** (41 tests) - Multi-device testing
6. **Content Validation** (33 tests) - Content accuracy

## Parallelization

Tests are split across 2 containers for optimal performance:
- **Container 1**: ~62 tests
- **Container 2**: ~62 tests
- **Estimated Time**: ~3-4 minutes (vs ~6-8 minutes sequential)

## Troubleshooting

### If CI fails:
1. Check GitHub Actions logs
2. Review Cypress Cloud dashboard for detailed error info
3. Download artifacts (screenshots/videos) from GitHub Actions

### Common Issues:
- **Port conflict**: Ensure port 5173 is available
- **Timeout**: Increase `wait-on-timeout` if server takes longer to start
- **Flaky tests**: Review in Cypress Cloud analytics

## Maintenance

### Regenerate Record Key
If you need to regenerate the Cypress record key:
1. Go to Cypress Cloud → Project Settings
2. Generate new record key
3. Update `CYPRESS_RECORD_KEY` in GitHub Secrets

### Update Workflow
To modify the CI workflow, edit `.github/workflows/cypress.yml`

## Resources
- [Cypress Cloud Docs](https://docs.cypress.io/guides/cloud/introduction)
- [GitHub Actions Docs](https://docs.github.com/en/actions)
- [Cypress Parallelization](https://docs.cypress.io/guides/guides/parallelization)
